(function(){window._||(window._={throttle:function(e,c,g){c||(c=250);var a,d;return function(){var f=g||this,b=+new Date,h=arguments;a&&b<a+c?(clearTimeout(d),d=setTimeout(function(){a=b;e.apply(f,h)},c+a-b)):(a=b,e.apply(f,h))}}});var q=window._;angular.module("angular-lazy-load",[]).provider("lazyLoad",function(){this.scrollOffset=null;this.useIntersectionObserver=!0;this.setScrollOffset=function(e){this.scrollOffset=e};this.setUseIntersectionObserver=function(e){this.useIntersectionObserver=e};
this.$get=function(){return this}}).directive("onScrollTo",["$window","$timeout","lazyLoad",function(e,c,g){var a={intersectionThreshold:.1,throttleWait:20,unobserveInstantly:!0,observeInstantly:!0,useIntersectionObserver:g.useIntersectionObserver,intersectionRoot:null,intersectionRootMargin:"0px",scrollOffset:g.scrollOffset};return{restrict:"A",link:function(d,f,b){var h=d.$eval(b.onScrollTo);b={intersectionRatio:d.$eval(b.scrollThreshold),throttleWait:d.$eval(b.scrollThrottle),unobserveInstantly:d.$eval(b.scrollUnobserve),
observeInstantly:d.$eval(b.scrollObserve),intersectionRoot:d.$eval(b.scrollRoot),intersectionRootMargin:d.$eval(b.scrollRootMargin),scrollOffset:d.$eval(b.scrollOffset),useIntersectionObserver:d.$eval(b.useIo)};for(var k in b){var g=b[k];null!=g&&(a[k]=g)}if(a.useIntersectionObserver&&"undefined"!==typeof IntersectionObserver){null!=a.scrollOffset&&a.intersectionRootMargin&&(k=a.intersectionRootMargin.split(" ").splice(0,1),k=k.concat([a.scrollOffset+"px"]),k.join(" "));var m=new IntersectionObserver(function(b){if(0!=
b[0].intersectionRatio&&(d.$apply(h),a.unobserveInstantly))return m.unobserve(f[0])},{root:a.intersectionRoot,rootMargin:a.intersectionRootMargin,threshold:a.intersectionThreshold});return m.observe(f[0])}var r=a.scrollOffset||0,n=function(){var b=function(a){return a[0].getBoundingClientRect().top+window.pageYOffset-a[0].ownerDocument.documentElement.clientTop},c=angular.element(a.intersectionRoot);if((c[0]?b(c)+c[0].offsetHeight:window.innerHeight+window.pageYOffset)>b(f)-r&&(d.$apply(h),a.unobserveInstantly))return e.removeEventListener("scroll",
l)},l=q.throttle(function(a){if(null==f[0].offsetParent)return!1;n()},a.throttleWait);try{var p=window.self!==window.top}catch(t){p=!0}p?d.$apply(h):(e.addEventListener("scroll",l),a.observeInstantly&&c(l));n();d.$on("$destroy",function(){a.useIntersectionObserver?m.unobserve(f[0]):e.removeEventListener("scroll",l)})}}}]).directive("ngLazyLoad",["lazyLoad",function(e){return{restrict:"A",controller:["$element",function(c){this.scrollOffset=e.scrollOffset;this.aot=c.attr("aot")||!1;this.scrollHandler=
function(e){c.attr("lazy-src")&&(c.attr("src",c.attr("lazy-src")),c.removeAttr("lazy-src"));c.attr("use-io")&&c.removeAttr("use-io")}}],controllerAs:"ll",template:"\x3cimg on-scroll-to\x3d'll.scrollHandler' use-io\x3d'!ll.aot' /\x3e",replace:!0,priority:50}}])})();
